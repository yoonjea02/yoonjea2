/* =========================================================
   MODERN APP UI v6 — Emoji Unified + Centered Layouts
   ========================================================= */

/* ---------- Tokens ---------- */
:root{
  --bg:#F7F8FB; --surface:#FFFFFF; --surface-2:#FBFCFE; --line:#E8EBF3;
  --text:#0F172A; --muted:#667085; --hint:#98A2B3;
  --primary:#4F46E5; --accent:#06B6D4;
  --goal-a:#4F46E5; --goal-b:#F59E0B;

  --radius:16px; --radius-lg:20px;
  --shadow:0 8px 24px rgba(20,24,40,.08);
  --ring:0 0 0 6px rgba(79,70,229,.12);
  --ease:cubic-bezier(.22,.8,.36,1);

  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Apple SD Gothic Neo, Noto Sans KR, Malgun Gothic, Helvetica Neue, Arial, sans-serif;

  --fs-12: clamp(11px,.8vw,12px);
  --fs-14: clamp(12px,.9vw,14px);
  --fs-16: clamp(14px,1vw,16px);
  --fs-18: clamp(16px,1.2vw,18px);
  --fs-20: clamp(18px,1.4vw,20px);
  --fs-24: clamp(20px,1.8vw,24px);

  /* 공통 최대 본문 너비 (검색/알림/분석 페이지 센터링에 사용) */
  --content-w: 560px;
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#0E1117; --surface:#141821; --surface-2:#171C26; --line:#1F2531;
    --text:#E6EAF2; --muted:#A9B1C3; --hint:#8B93A6;
    --shadow:0 14px 32px rgba(0,0,0,.45); --ring:0 0 0 6px rgba(79,70,229,.22);
  }
}

/* ---------- Base ---------- */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:var(--font); font-weight:450; line-height:1.55;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}
.wrap{max-width:960px; margin:0 auto; min-height:100dvh;
  display:grid; grid-template-rows:auto 1fr auto}
.section{padding:22px 20px}
.stack{display:grid; gap:16px}
.small{font-size:var(--fs-12); color:var(--muted)}
.label{font-size:var(--fs-12); color:var(--muted)}
.kpi{font-size:var(--fs-20); font-weight:800}
.hr{height:1px; background:var(--line); margin:16px 0}
a{color:var(--primary); text-decoration:none}
a:hover{text-decoration:underline}
a:focus-visible, button:focus-visible, input:focus-visible{outline:none; box-shadow:var(--ring)}

/* ---------- Header ---------- */
header{
  position:sticky; top:0; z-index:10;
  background:linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,0));
  border-bottom:1px solid var(--line); backdrop-filter:saturate(140%) blur(8px);
}
@media (prefers-color-scheme: dark){
  header{ background:linear-gradient(180deg, rgba(20,24,33,.75), rgba(20,24,33,0)) }
}
.top-bar{display:flex; align-items:center; justify-content:space-between; padding:10px 20px; font-size:var(--fs-14); color:var(--hint)}
.status{display:flex; gap:6px}
.top-actions{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 20px}
.btn{
  appearance:none; border:1px solid var(--line); cursor:pointer;
  background:linear-gradient(180deg, var(--surface-2), var(--surface));
  color:var(--text); padding:10px 14px; border-radius:14px; box-shadow:var(--shadow);
  transition:transform .08s var(--ease), box-shadow .2s var(--ease)
}
.btn:hover{box-shadow:0 10px 28px rgba(79,70,229,.12)}
.btn:active{transform:translateY(1px)}
.icon-btn{
  display:inline-grid; place-items:center; min-width:40px; height:40px;
  background:var(--surface); border:1px solid var(--line); color:var(--muted);
  border-radius:12px; cursor:pointer; box-shadow:var(--shadow);
  transition:background .2s var(--ease), color .2s var(--ease)
}
.icon-btn:hover{background:var(--surface-2); color:var(--text)}

/* ---------- Surfaces ---------- */
.summary,.panel,.hero,.goal-card,.aside-card,.card,.list-item,.result-card,.insight,.tip-card,.stats-card{
  background:var(--surface); border-radius:var(--radius); border:1px solid var(--line); box-shadow:var(--shadow);
}

/* ---------- Hero (Home/My) ---------- */
.hero{
  display:grid; grid-template-columns:72px 1fr; gap:14px; padding:18px 16px;
  background:radial-gradient(120% 120% at 0% 0%, rgba(79,70,229,.08) 0%, transparent 60%), var(--surface);
}
.hero .avatar{
  width:72px; height:72px; border-radius:50%; display:grid; place-items:center;
  background:linear-gradient(180deg, var(--surface-2), var(--surface));
  border:1px solid var(--line); color:var(--primary); font-size:28px; position:relative; isolation:isolate;
}
.hero .avatar::after{
  content:""; position:absolute; inset:-2px; border-radius:50%;
  background:conic-gradient(from 180deg, var(--primary), var(--accent)); z-index:-1; filter:blur(10px); opacity:.25;
}
.hero .name{font-weight:800; font-size:var(--fs-18); margin:6px 0 2px}
.hero .email{color:var(--hint); font-size:var(--fs-12)}

/* ---------- My Page: 화살표 제거 + 정렬 안정 ---------- */
.menu{display:grid; gap:8px}
.menu a{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:14px 12px; color:var(--text);
  border-radius:12px; border:1px solid var(--line);
  background:linear-gradient(180deg, var(--surface-2), var(--surface));
  transition:background .2s var(--ease), transform .08s var(--ease)
}
.menu a::after{content:none}
.menu a .lead{display:flex; align-items:center; gap:10px; min-height:24px}
.menu a:hover{background:var(--surface); transform:translateY(-1px)}

/* ---------- Home Summary & Donuts ---------- */
.summary{padding:18px 16px}
.summary h2{margin:0 0 10px; font-size:var(--fs-18)}
.bars{display:grid; gap:10px; margin-top:12px}
.bar{display:grid; grid-template-columns:46px 1fr; align-items:center; gap:12px}
.track{height:10px; background:var(--surface-2); border:1px solid var(--line); border-radius:999px; overflow:hidden}
.fill{height:100%}
.fill.july{background:#CBD5E1}
.fill.aug{background:var(--primary)}

.panel{padding:18px 16px}
.cards{display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:12px}
@media (max-width:640px){.cards{grid-template-columns:1fr}}
.card{padding:14px; display:grid; gap:10px; background:var(--surface-2)}
.card .label{font-size:var(--fs-12); color:var(--muted)}
.card .kpi{font-size:var(--fs-20)}
.donut{
  width:112px; height:112px; margin:6px auto 0; border-radius:50%;
  background:conic-gradient(var(--primary) calc(var(--percent)*1%), #E2E8F0 0);
  display:grid; place-items:center; position:relative; border:1px solid var(--line)
}
.donut::after{content:""; position:absolute; inset:12px; border-radius:50%; background:var(--surface-2); border:1px solid var(--line)}
.donut .center{position:relative; font-size:var(--fs-12); color:var(--muted); text-align:center}

/* ---------- Savings Goal (홈/요금 공통) ---------- */
.goal-card{padding:16px 16px; display:grid; gap:12px}
.goal-head{display:flex; align-items:baseline; justify-content:space-between; gap:10px}
.goal-title{font-size:var(--fs-16); font-weight:800; margin:0}
.goal-title::before{content:"🎯"; margin-right:6px}
.goal-meta{color:var(--muted); font-size:var(--fs-12)}
.progress{display:grid; gap:6px}
.progress-track{height:12px; background:var(--surface-2); border:1px solid var(--line); border-radius:999px; overflow:hidden}
.progress-fill{height:100%; width:0%; background:linear-gradient(90deg, var(--goal-a), var(--goal-b)); border-radius:999px; transition:width .45s var(--ease)}
.progress-label{display:flex; flex-wrap:wrap; gap:6px 10px; justify-content:space-between}
.goal-form{display:flex; flex-wrap:wrap; gap:8px; align-items:center}
.goal-form .input{
  flex:1 1 320px; min-width:220px; height:48px; padding:0 14px; font-size:var(--fs-16);
  border:1px solid var(--line); border-radius:12px; background:var(--surface-2); color:var(--text)
}
.goal-form .btn{padding:8px 12px; font-size:var(--fs-14); border-radius:12px; min-width:68px}
.goal-form .btn:first-of-type{margin-left:auto}  /* 저장을 오른쪽으로 밀고 초기화와 나란히 */
#goalClear{background:#374151; color:#fff}
.badge-success{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px;
  background:rgba(16,185,129,.12); color:#047857; border:1px solid rgba(16,185,129,.25); font-size:var(--fs-12); font-weight:700}
.badge-success::before{content:"🏆"}

/* ---------- Analysis (AI) ---------- */
.insight{
  padding:16px; display:grid; gap:8px;
  background:linear-gradient(180deg, rgba(79,70,229,.06), rgba(79,70,229,0) 70%), var(--surface);
  border-left:4px solid var(--primary)
}
.insight h3{margin:0; font-size:var(--fs-18); display:flex; align-items:center; gap:8px}
.insight h3::after{content:"🧠"}

.chart-line,.chart-bars{
  height:160px; border-radius:12px; background:
    linear-gradient(0deg, rgba(0,0,0,.03), rgba(0,0,0,.03)),
    repeating-linear-gradient(90deg, transparent 0 36px, rgba(0,0,0,.03) 36px 37px),
    linear-gradient(180deg, var(--surface-2), var(--surface));
  border:1px solid var(--line); display:grid; place-items:center; color:var(--hint); font-size:var(--fs-12)
}
.tip-card{padding:14px; display:grid; gap:8px; background:var(--surface-2)}
.tip-card h4{margin:0; display:flex; align-items:center; gap:8px; font-size:var(--fs-16)}
.tip-card:nth-of-type(1) h4::after{content:"⚡"}
.tip-card:nth-of-type(2) h4::after{content:"💧"}
.tip-card:nth-of-type(3) h4::after{content:"🔥"}

/* ---------- Search: 중앙 정렬 & 좌측 쏠림 제거 ---------- */
body[data-page="search"] .search-box,
body[data-page="search"] .result-grid{
  width:min(100%, var(--content-w)); margin-inline:auto;
}
.search-box{
  background:var(--surface); border-radius:var(--radius); box-shadow:var(--shadow);
  border:1px solid var(--line); padding:18px 16px; display:grid; gap:12px;
}
.search-box .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
.search-box input[type="search"], .search-box input[type="text"], .search-box .input{
  flex:1 1 320px; min-width:220px; height:44px; padding:0 14px; font-size:var(--fs-16);
  border:1px solid var(--line); border-radius:12px; background:var(--surface-2); color:var(--text)
}
.pills{display:flex; gap:8px; flex-wrap:wrap}
.pill{padding:6px 10px; border-radius:999px; background:var(--surface-2); color:var(--muted); font-size:var(--fs-12); border:1px solid var(--line)}
.pill.active{background:var(--primary); color:#fff; border-color:var(--primary)}
.result-grid{display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:12px; margin-top:4px}
@media (max-width:640px){.result-grid{grid-template-columns:1fr}}
.result-card{display:grid; gap:8px; background:var(--surface-2); padding:14px; border-radius:12px; border:1px solid var(--line)}
.result-card .title{font-weight:700; display:flex; align-items:center; gap:10px}
.result-card .title::before{content:"🔎"; font-size:18px}
.result-card .desc{color:var(--muted); font-size:var(--fs-12)}

/* ---------- Alerts: 중앙 정렬 & 아이콘 통일 ---------- */
body[data-page="alerts"] .list,
body[data-page="alerts"] .stats-card{
  width:min(100%, var(--content-w)); margin-inline:auto;
}
.list{display:grid; gap:12px}
.list-item{
  display:grid; grid-template-columns:52px 1fr auto; gap:12px; align-items:center;
  padding:12px 14px; background:var(--surface-2); border:1px solid var(--line); border-radius:12px
}
/* 실제 이모지를 중앙에 (겹침 방지) */
.list-item .icon{
  width:48px; height:48px; border-radius:12px;
  background:linear-gradient(180deg, var(--surface), var(--surface-2));
  border:1px solid var(--line); display:grid; place-items:center;
  font-size:22px; line-height:1
}
/* 상태 배지 */
.badge{padding:6px 10px; border-radius:999px; font-size:var(--fs-12); border:1px solid var(--line)}
.badge.ok{background:rgba(16,185,129,.12); color:#047857; border-color:rgba(16,185,129,.25)}
.badge.warn{background:rgba(234,88,12,.12); color:#9A3412; border-color:rgba(234,88,12,.25)}
.badge.info{background:rgba(59,130,246,.12); color:#1D4ED8; border-color:rgba(59,130,246,.25)}

/* 이번 달 알림 통계 카드: 텍스트 분산 */
.stats-card{padding:16px}
.stat-grid{display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:12px}
@media (max-width:840px){.stat-grid{grid-template-columns:repeat(2, minmax(0,1fr))}}
@media (max-width:520px){.stat-grid{grid-template-columns:1fr}}
.stat{
  background:linear-gradient(180deg, var(--surface-2), var(--surface));
  border:1px solid var(--line); border-radius:14px; padding:14px;
  display:grid; gap:6px; align-content:center; text-align:center
}
.stat .emoji{font-size:20px; line-height:1}
.stat .value{font-size:var(--fs-24); font-weight:800}
.stat .label{font-size:var(--fs-12); color:var(--muted)}

/* ---------- “분석” 페이지도 중앙 정렬 느낌 살리기 ---------- */
body[data-page="analytics"] .insight,
body[data-page="analytics"] .panel,
body[data-page="analytics"] .tip-card{
  width:min(100%, var(--content-w)); margin-inline:auto;
}

/* ---------- Empty ---------- */
.empty{
  padding:22px; border:1px dashed var(--line); border-radius:14px; color:var(--muted);
  display:grid; place-items:center; text-align:center; gap:8px; background:var(--surface)
}
.empty::before{content:"📭"; font-size:26px}

/* ---------- Bottom Tabs: 이모지 강제 통일 (모든 페이지 동일) ---------- */
.tabs{background:transparent; padding:12px; gap:12px; display:grid; grid-template-columns:repeat(5, 1fr)}
.tab{
  position:relative; height:56px; border-radius:14px; display:grid; place-items:center;
  background:var(--surface); border:1px solid var(--line); box-shadow:var(--shadow);
  color:#6B7280; transition:background .2s var(--ease), color .2s var(--ease), transform .08s var(--ease);
  font-size:0; /* 내부 텍스트/이모지 숨김 → ::before로 통일 출력 */
}
.tab:hover{background:var(--surface-2); color:var(--text)}
.tab:active{transform:translateY(1px)}
.tab.active{background:var(--primary); color:#fff; border-color:var(--primary)}
.tab.active::after{content:""; position:absolute; bottom:6px; width:18px; height:3px; border-radius:999px; background:rgba(255,255,255,.85)}
.tab::before{font-size:24px; line-height:1}
.tabs .tab:nth-child(1)::before{content:"🏠"} /* 홈 */
.tabs .tab:nth-child(2)::before{content:"🧠"} /* AI */
.tabs .tab:nth-child(3)::before{content:"📊"} /* 요금 */
.tabs .tab:nth-child(4)::before{content:"👤"} /* 마이 */
.tabs .tab:nth-child(5)::before{content:"🧭"} /* 전체 */
.nav{display:none}

/* ---------- Drawer ---------- */
.scrim{position:fixed; inset:0; background:rgba(15,18,30,.5); backdrop-filter:blur(2px); display:none; z-index:30}
.drawer{
  position:fixed; top:0; left:0; height:100%; width:86%; max-width:380px; background:var(--surface); border:1px solid var(--line);
  border-top-right-radius:22px; border-bottom-right-radius:22px; transform:translateX(-105%); transition:transform .28s var(--ease); z-index:31;
  padding:20px 16px; display:grid; gap:18px; box-shadow:var(--shadow)
}
.drawer.open{transform:translateX(0)}
.scrim.show{display:block}
.drawer .hero{background:radial-gradient(120% 120% at 0% 0%, rgba(79,70,229,.10) 0%, transparent 60%), var(--surface-2)}
.drawer .menu{display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:12px}
.drawer .hr{background:var(--line)}
.drawer .actions{color:var(--muted)}

/* ---------- Helpers ---------- */
.emoji{font-size:20px; line-height:1}
.emoji-xl{font-size:28px; line-height:1}

/* ---------- Reduce Motion ---------- */
@media (prefers-reduced-motion: reduce){
  *{transition:none !important; animation:none !important}
}
/* =========================================================
   SETTINGS (My Page) — Simple/Classic Layout
   ========================================================= */

body[data-page="settings"] .settings-narrow{
  width:min(100%, var(--content-w));
  margin-inline:auto;
  display:grid; gap:16px;
}

/* 심플 프로필 카드 */
body[data-page="settings"] .profile-hero{
  display:grid; grid-template-columns:64px 1fr auto; gap:12px; align-items:center;
  padding:16px; background:var(--surface); border:1px solid var(--line);
  border-radius:var(--radius); box-shadow:var(--shadow);
}
body[data-page="settings"] .profile-hero .avatar{
  width:64px; height:64px; border-radius:50%; display:grid; place-items:center;
  background:linear-gradient(180deg,var(--surface-2),var(--surface));
  border:1px solid var(--line); font-size:26px; line-height:1
}
body[data-page="settings"] .profile-hero .name{font-size:var(--fs-18); font-weight:800}
body[data-page="settings"] .profile-hero .email{font-size:var(--fs-12); color:var(--hint)}
body[data-page="settings"] .btn-lite{
  padding:8px 12px; border-radius:12px; border:1px solid var(--line);
  background:linear-gradient(180deg,var(--surface-2),var(--surface));
  color:var(--text); text-decoration:none; box-shadow:var(--shadow);
}
body[data-page="settings"] .btn-lite:hover{background:var(--surface-2)}

/* 메뉴 목록: 예전 느낌(구분선) + 화살표 없음 */
body[data-page="settings"] .menu-list{
  background:var(--surface); border:1px solid var(--line);
  border-radius:var(--radius); box-shadow:var(--shadow); overflow:hidden;
}
body[data-page="settings"] .menu-list .row{
  display:flex; align-items:center; gap:12px; padding:14px 16px;
  text-decoration:none; color:var(--text); background:var(--surface);
  border-top:1px solid var(--line); transition:background .15s var(--ease)
}
body[data-page="settings"] .menu-list .row:first-child{border-top:none}
body[data-page="settings"] .menu-list .row:hover{background:var(--surface-2)}
body[data-page="settings"] .menu-list .ico{
  width:36px; height:36px; border-radius:10px; display:grid; place-items:center;
  background:linear-gradient(180deg,var(--surface-2),var(--surface)); border:1px solid var(--line);
  font-size:18px; line-height:1
}
body[data-page="settings"] .menu-list .title{font-weight:700}

/* 위험 구역 (심플) */
body[data-page="settings"] .danger-simple{
  display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap;
}
body[data-page="settings"] .btn-outline{
  padding:8px 12px; border-radius:12px; border:1px solid var(--line);
  background:var(--surface); color:var(--text); text-decoration:none
}
body[data-page="settings"] .btn-danger{
  padding:8px 12px; border-radius:12px; border:1px solid rgba(239,68,68,.35);
  background:rgba(239,68,68,.1); color:#b91c1c; text-decoration:none
}
/* ===== Usage Horizontal Bars (for goals.html) ===== */
.usage-bars{
  display:grid; gap:12px;
  padding:12px; border-radius:14px;
  background:var(--surface); border:1px solid var(--line);
}
.usage{display:grid; gap:6px}
.usage-head{display:flex; align-items:baseline; justify-content:space-between; gap:10px}
.usage-head .left{display:flex; align-items:center; gap:8px; font-weight:700}
.usage-head .left .emo{font-size:18px; line-height:1}
.usage-head .right .val{font-weight:800}

.usage-meter{
  height:14px; border-radius:999px; overflow:hidden;
  background:var(--surface-2); border:1px solid var(--line);
}
.usage-fill{
  height:100%; width:var(--w,0%);
  border-radius:999px; transition:width .45s var(--ease);
}
.u-yellow{background:linear-gradient(90deg,#FACC15,#F59E0B)} /* ⚡ 전기 */
.u-blue  {background:linear-gradient(90deg,#38BDF8,#0EA5E9)} /* 💧 수도 */
.u-orange{background:linear-gradient(90deg,#FB923C,#F97316)} /* 🔥 가스 */

.usage-legend{color:var(--muted)}

/* ===== Global Drawer (same on every page) ===== */
.scrim{
  position:fixed; inset:0; background:rgba(17,24,39,.45);
  opacity:0; pointer-events:none; transition:opacity .25s var(--ease);
  display:none;
  z-index:59;
}
.scrim.show{ display:block !important; opacity:.55 !important; pointer-events:auto !important; }

.drawer{
  position:fixed; top:0; left:0; height:100dvh; width:min(86vw,360px);
  background:var(--surface); border-right:1px solid var(--line);
  transform:translateX(-105%); transition:transform .25s var(--ease);
  z-index:60; padding:16px; box-shadow:20px 0 40px rgba(0,0,0,.08);
  border-radius:0 24px 24px 0;
}
.drawer.open{ transform:translateX(0) !important; }

/* Drawer content */
.d-hero{
  display:grid; grid-template-columns:56px 1fr; gap:12px; align-items:center;
  padding:12px; border-radius:16px;
  background:linear-gradient(180deg,var(--surface-2),var(--surface));
  border:1px solid var(--line); margin-bottom:12px;
}
.d-avatar{
  width:56px; height:56px; border-radius:50%; display:grid; place-items:center;
  background:radial-gradient(60% 60% at 30% 30%, rgba(99,102,241,.25), transparent 70%), #E5E7EB;
  color:#374151; font-size:24px; line-height:1;
}
.d-name{ font-weight:800 }
.d-email{ font-size:12px; color:var(--hint) }

.d-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin:4px 0 8px }
.d-btn{
  display:grid; place-items:center; gap:6px; text-align:center;
  padding:14px 10px; border-radius:14px; background:var(--surface);
  border:1px solid var(--line); box-shadow:var(--shadow); text-decoration:none; color:var(--text)
}
.d-btn .emoji{ font-size:18px; line-height:1 }
.d-btn .label{ font-weight:700; font-size:14px }
.d-btn:hover{ transform:translateY(-1px) }

.d-hr{ height:1px; background:var(--line); margin:12px 0; border-radius:1px }
.d-actions{ display:flex; justify-content:space-between; font-weight:700; color:#6366f1 }



