<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì‹¤ì‹œê°„ ìš”ê¸ˆ</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@latest/dist/web/variable/pretendardvariable-dynamic-subset.css" />

</head>
<body data-page="goals">
  <div class="wrap">
    <!-- Header -->
    <header>
      <div class="top-bar">
        <div class="time">--:--</div>
        <div class="status" aria-hidden="true"><span>ğŸ“¶</span><span>ğŸ“¡</span><span>ğŸ”‹</span></div>
      </div>
      <div class="top-actions">
        <a class="btn" href="log.html">ë¡œê·¸</a>
        <div>
          <a class="icon-btn" href="alerts.html" aria-label="ì•Œë¦¼">ğŸ””</a>
          <a class="icon-btn" href="search.html" aria-label="ê²€ìƒ‰">ğŸ”</a>
          <button class="icon-btn" id="openDrawer" aria-label="ì „ì²´ ë©”ë‰´">ğŸ§­</button>
        </div>
      </div>
    </header>

    <!-- Main -->
    <main class="section stack">
      <section class="panel">
        <h3>ì ˆì•½ ëª©í‘œ í•œëˆˆì— íŒŒì•…í•˜ê¸°</h3>

        <!-- ì ˆì•½ ëª©í‘œ ì¹´ë“œ (ì œëª© 1ì¤„ + ìš°ì¸¡ ëª©í‘œ/ë‚¨ì€ê¸ˆì•¡ 2ì¤„) -->
        <div class="goal-card">
          <div class="goal-head" style="display:flex;justify-content:space-between;align-items:flex-start;gap:10px;">
            <h3 class="goal-title" style="white-space:nowrap;margin:0;">ì´ë²ˆ ë‹¬ ì ˆì•½ ëª©í‘œ</h3>
            <div class="goal-side" style="display:flex;flex-direction:column;align-items:flex-end;line-height:1.2;">
              <span class="goal-meta" style="white-space:nowrap;">ëª©í‘œ: <span id="goalTarget">30,000 ì›</span></span>
              <span class="goal-meta" style="white-space:nowrap;">ë‚¨ì€ ê¸ˆì•¡ <span id="goalRemain">25,600 ì›</span></span>
            </div>
          </div>

          <div class="progress">
            <div class="progress-track"><div id="goalFill" class="progress-fill" style="width:15%"></div></div>
            <div class="progress-label">
              <span id="savedNow">ì´ë²ˆ ë‹¬ ì ˆê°ì•¡: 4,400 ì›</span>
              <span id="goalPct">15%</span>
            </div>
          </div>
          <form class="goal-form" id="goalForm">
            <input id="goalInput" class="input" type="number" min="0" step="1000" placeholder="ëª©í‘œ ê¸ˆì•¡ (ì˜ˆ: 50000)" value="30000" />
            <div class="goal-actions">
              <button type="submit" class="btn">ì €ì¥</button>
              <button type="button" id="goalClear" class="btn">ì´ˆê¸°í™”</button>
            </div>
          </form>
        </div>

        <!-- (NEW) ê·¼ì²˜ ìœ ì € ë¹„êµ ë¬¸êµ¬ + ë¯¸ë‹ˆ ë§‰ëŒ€ê·¸ë˜í”„ -->
        <section class="neighbor-note">
          <p class="neighbor-title">
            ê·¼ì²˜ ìœ ì € ì¤‘ <strong class="hl">@@ë‹˜</strong>ì€ ì—ë„ˆì§€ ì ˆì•½ ì„±ê³µë¥ 
            <strong class="hl">ìƒìœ„ 7%ì˜ˆìš”!</strong>
          </p>
          <div class="mini-colchart" aria-label="ê·¼ì²˜ ìœ ì € ë¹„êµ ê·¸ë˜í”„">
            <div class="col self" style="--h:84%"><span class="val">84%</span><span class="lab">@@@ë‹˜</span></div>
            <div class="col others" style="--h:28%"><span class="val">28%</span><span class="lab">ì•ˆì„œë™ ìœ ì €</span></div>
          </div>
        </section>

        <!-- (NEW) ì¢…ëª©ë³„ ëª©í‘œ ì„¤ì •ê¸ˆì•¡ ë‹¬ì„±ë¥  -->
        <section class="cat-goals">
          <!-- ì „ê¸° -->
          <div class="goal-line" data-now="5380" data-target="10000">
            <div class="gl-head">
              <div class="label">âš¡ ì „ê¸°</div>
              <div class="val nowrap"><span class="now">5,380</span> / <span class="target">10,000</span> ì›</div>
            </div>
            <div class="gl-meter"><div class="gl-fill"></div></div>
            <div class="gl-pct nowrap">0%</div>
          </div>
          <!-- ìˆ˜ë„ -->
          <div class="goal-line" data-now="7400" data-target="10000">
            <div class="gl-head">
              <div class="label">ğŸ’§ ìˆ˜ë„</div>
              <div class="val nowrap"><span class="now">7,400</span> / <span class="target">10,000</span> ì›</div>
            </div>
            <div class="gl-meter"><div class="gl-fill"></div></div>
            <div class="gl-pct nowrap">0%</div>
          </div>
          <!-- ê°€ìŠ¤ -->
          <div class="goal-line" data-now="20000" data-target="30000">
            <div class="gl-head">
              <div class="label">ğŸ”¥ ê°€ìŠ¤</div>
              <div class="val nowrap"><span class="now">20,000</span> / <span class="target">30,000</span> ì›</div>
            </div>
            <div class="gl-meter"><div class="gl-fill"></div></div>
            <div class="gl-pct nowrap">0%</div>
          </div>
        </section>
      </section>
    </main>

    <!-- Tabs -->
    <footer>
      <div class="tabs">
        <a class="tab" href="index.html">í™ˆ</a>
        <a class="tab" href="analysis.html">AI</a>
        <a class="tab active" href="goals.html">ìš”ê¸ˆ</a>
        <a class="tab" href="profile.html">ë§ˆì´</a>
        <button class="tab" id="openDrawer2" type="button">ì „ì²´</button>
      </div>
    </footer>
  </div>

  <!-- Drawer (ê³µí†µ) -->
  <div class="scrim" id="scrim"></div>
  <aside class="drawer" id="drawer" aria-label="ì „ì²´ ë©”ë‰´">
    <div class="d-hero">
      <div class="d-avatar">ğŸ‘¤</div>
      <div><div class="d-name">@@ë‹˜</div><div class="d-email">aaa123@gmail.com</div></div>
    </div>
    <div class="d-grid">
      <a class="d-btn" href="profile.html"><div class="emoji">ğŸ‘¤</div><div class="label">ì •ë³´ ê´€ë¦¬</div></a>
      <a class="d-btn" href="alerts.html"><div class="emoji">ğŸ””</div><div class="label">ì•Œë¦¼</div></a>
      <a class="d-btn" href="#"><div class="emoji">ğŸ“¢</div><div class="label">ê³µì§€ì‚¬í•­</div></a>
      <a class="d-btn" href="profile.html"><div class="emoji">ğŸ‘¤</div><div class="label">ë§ˆì´í˜ì´ì§€</div></a>
      <a class="d-btn" href="#"><div class="emoji">ğŸ’¬</div><div class="label">ê³ ê°ì„¼í„°</div></a>
      <a class="d-btn" href="search.html"><div class="emoji">ğŸ”</div><div class="label">ê²€ìƒ‰</div></a>
    </div>
    <div class="d-hr"></div>
    <div class="d-actions"><a href="#">ë¡œê·¸ì•„ì›ƒ</a><a href="#">íƒˆí‡´í•˜ê¸°</a></div>
  </aside>

  <!-- (NEW) ë‹¬ì„±ë¥  ê³„ì‚° ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    (function(){
      // ìˆ«ì í¬ë§·í„°
      const fmt = new Intl.NumberFormat('ko-KR');

      // ì¢…ëª©ë³„ ë‹¬ì„±ë¥  ì±„ìš°ê¸°
      document.querySelectorAll('.goal-line').forEach(row=>{
        const now = Number(row.dataset.now || 0);
        const target = Math.max(1, Number(row.dataset.target || 0)); // 0ìœ¼ë¡œ ë‚˜ëˆ” ë°©ì§€
        const pct = Math.min(100, Math.round((now/target)*1000)/10); // ì†Œìˆ˜ 1ìë¦¬

        // í‘œì‹œ ì—…ë°ì´íŠ¸
        const nowEl = row.querySelector('.now');
        const tarEl = row.querySelector('.target');
        const pctEl = row.querySelector('.gl-pct');
        if (nowEl) nowEl.textContent = fmt.format(now);
        if (tarEl) tarEl.textContent = fmt.format(target);
        if (pctEl) pctEl.textContent = pct + '%';

        const fill = row.querySelector('.gl-fill');
        if (fill) fill.style.width = pct + '%';
      });
    })();
  </script>

  <!-- Drawer script (ê¸°ì¡´) -->
  <script>
    (function(){
      const d=document, dr=d.getElementById('drawer'), sc=d.getElementById('scrim');
      const open=()=>{dr.classList.add('open'); sc.classList.add('show');};
      const close=()=>{dr.classList.remove('open'); sc.classList.remove('show');};
      d.getElementById('openDrawer')?.addEventListener('click', open);
      d.getElementById('openDrawer2')?.addEventListener('click', open);
      sc.addEventListener('click', close);
      d.addEventListener('keydown', e=>{ if(e.key==='Escape') close(); });
      d.addEventListener('DOMContentLoaded', close);
    })();
  </script>
</body>
</html>
